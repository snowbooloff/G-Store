import{d as D,g as x,h as C,q as E,V as P,o as r,a as A,e as a,j as B,G as R,J as $,t as p,u as h,c as v,n as w,b as g,z as m,N as j,a3 as z,a4 as F,a5 as L,a0 as U,a6 as G,a7 as T,f as q,p as J,m as O,l as H}from"./vendor-8bbb4221.js";import{U as K}from"./UserAvatar-1886d49c.js";import{c as I}from"./correctErrorText-1822bb20.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const u=c=>(J("data-v-f04b673b"),c=c(),O(),c),Q={class:"page-block flex flex_column flex_align-center"},W={class:"profile-avatar"},X={class:"user-info flex flex_column"},Y={class:"details flex flex_align-center"},Z=u(()=>a("h3",{class:"datails__item main-white"},"Nickname:",-1)),ee={class:"details flex flex_align-center"},te=u(()=>a("h3",{class:"datails__item main-white"},"Email Address:",-1)),ae={class:"details flex flex_align-center"},se=u(()=>a("h3",{class:"datails__item main-white"},"Password:",-1)),ne=u(()=>a("ins",null,"Change Password",-1)),ie=[ne],oe={class:"details flex flex_align-center"},le=u(()=>a("h3",{class:"datails__item main-white"},"Registration Date:",-1)),ue={class:"datails__text main-blue"},ce=D({__name:"UserView",setup(c){const l=H(),d=x(()=>l.state.user.userInfo),b=x(()=>new Date(d.value.registrationDate).toLocaleDateString("en-GB")),i=C("");E(i,s=>{s.length&&setTimeout(()=>i.value="",1500)});const t=P({nicknameInput:{isShow:!1,value:""},emailInput:{isShow:!1,value:""},passwordInput:{isShow:!1,value:""}});function f(s){s.isShow=!s.isShow;const e=Object.values(t);for(let o=0;o<e.length;o++)e[o]!=s&&(e[o].isShow=!1,e[o].value="")}function S(s){if(s){const e=m(),o=j(),n=z(o,`userAvatars/${e.currentUser.uid}/avatar`);F(n,s).then(()=>{L(n).then(k=>{U(e.currentUser,{photoURL:k}),l.commit("user/setUserImage",k),l.commit("notification/pushNotification","Profile image successfully uploaded")})})}}function N(){if(t.nicknameInput.value.length<4)i.value="Nickname to be a minimum of 4 characters";else{const s=m();U(s.currentUser,{displayName:t.nicknameInput.value}).then(()=>{l.commit("user/setUserNickname",t.nicknameInput.value),l.commit("notification/pushNotification","Nickname successfully updated"),_()}).catch(e=>{I(e,i)})}}function y(){const s=m();G(s.currentUser,t.emailInput.value).then(()=>{l.commit("user/setUserEmail",t.emailInput.value),l.commit("notification/pushNotification","Email Address successfully updated"),_()}).catch(e=>{I(e,i)})}function V(){const s=m();T(s.currentUser,t.passwordInput.value).then(()=>{l.commit("notification/pushNotification","Password successfully updated"),_()}).catch(e=>{I(e,i)})}function _(){t.nicknameInput.value="",t.nicknameInput.isShow=!1,t.emailInput.value="",t.emailInput.isShow=!1,t.passwordInput.value="",t.passwordInput.isShow=!1}return(s,e)=>{const o=q("v-input-submit");return r(),A("section",Q,[a("div",W,[B(K,{size:"200px"}),a("input",{class:"profile-avatar__input cursor-pointer",type:"file",accept:"image/png, image/jpeg",onInput:e[0]||(e[0]=n=>S(n.target.files[0]))},null,32)]),R(a("p",{class:"page-block__error"},p(i.value),513),[[$,i.value.length]]),a("div",X,[a("div",Y,[Z,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[1]||(e[1]=n=>f(t.nicknameInput))},[a("ins",null,p(h(d).nickname),1)])]),t.nicknameInput.isShow?(r(),v(o,{key:0,modelValue:t.nicknameInput.value,"onUpdate:modelValue":e[2]||(e[2]=n=>t.nicknameInput.value=n),submitFunc:N,class:w({shake:i.value.length}),type:"text",maxlength:"12",placeholder:"New Nickname"},null,8,["modelValue","class"])):g("",!0),a("div",ee,[te,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[3]||(e[3]=n=>f(t.emailInput))},[a("ins",null,p(h(d).email),1)])]),t.emailInput.isShow?(r(),v(o,{key:1,class:w({shake:i.value.length}),modelValue:t.emailInput.value,"onUpdate:modelValue":e[4]||(e[4]=n=>t.emailInput.value=n),type:"email",placeholder:"New Email Address",submitFunc:y},null,8,["class","modelValue"])):g("",!0),a("div",ae,[se,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[5]||(e[5]=n=>f(t.passwordInput))},ie)]),t.passwordInput.isShow?(r(),v(o,{key:2,class:w({shake:i.value.length}),modelValue:t.passwordInput.value,"onUpdate:modelValue":e[6]||(e[6]=n=>t.passwordInput.value=n),type:"text",maxlength:"12",placeholder:"New Password",submitFunc:V},null,8,["class","modelValue"])):g("",!0),a("div",oe,[le,a("h3",ue,p(h(b)),1)])])])}}});const fe=M(ce,[["__scopeId","data-v-f04b673b"]]);export{fe as default};
