import{a as C}from"./runtime-dom.esm-bundler-d846f7c9.js";import{g as E,r as P,u as A,a as B,U as R}from"./index.esm2017-426fdacd.js";import{c as h}from"./correctErrorText-1822bb20.js";import{g as r,M as x,P as $,Q as j}from"./index-e5b3cc81-e712630f.js";import{u as F}from"./vuex.esm-bundler-0c4770ad.js";import{d as L,g as U,a2 as S,h as z,l as T,o as m,a as G,e as a,j as M,x as O,t as p,u as v,c as w,n as g,b as I,f as Q,p as q,k as H,_ as J}from"./_plugin-vue_export-helper-b66d6dea.js";const u=c=>(q("data-v-a12b492c"),c=c(),H(),c),K={class:"page-block flex flex_column flex_align-center"},W={class:"profile-avatar"},X={class:"user-info flex flex_column"},Y={class:"details flex flex_align-center"},Z=u(()=>a("h3",{class:"datails__item main-white"},"Nickname:",-1)),ee={class:"details flex flex_align-center"},te=u(()=>a("h3",{class:"datails__item main-white"},"Email Address:",-1)),ae={class:"details flex flex_align-center"},se=u(()=>a("h3",{class:"datails__item main-white"},"Password:",-1)),ne=u(()=>a("ins",null,"Change Password",-1)),ie=[ne],oe={class:"details flex flex_align-center"},le=u(()=>a("h3",{class:"datails__item main-white"},"Registration Date:",-1)),ue={class:"datails__text main-blue"},ce=L({__name:"UserView",setup(c){const l=F(),d=U(()=>l.state.user.userInfo),b=U(()=>new Date(d.value.registrationDate).toLocaleDateString("en-GB"));S({email:"",nickname:"",password:""});const i=z("");T(i,s=>{s.length&&setTimeout(()=>i.value="",1500)});const t=S({nicknameInput:{isShow:!1,value:""},emailInput:{isShow:!1,value:""},passwordInput:{isShow:!1,value:""}});function f(s){s.isShow=!s.isShow;const e=Object.values(t);for(let o=0;o<e.length;o++)e[o]!=s&&(e[o].isShow=!1,e[o].value="")}function N(s){if(s){const e=r(),o=E(),n=P(o,`userAvatars/${e.currentUser.uid}/avatar`);A(n,s).then(()=>{B(n).then(k=>{x(e.currentUser,{photoURL:k}),l.commit("user/setUserImage",k),l.commit("notification/pushNotification","Profile image successfully uploaded")})})}}function y(){if(t.nicknameInput.value.length<4)i.value="Nickname to be a minimum of 4 characters";else{const s=r();x(s.currentUser,{displayName:t.nicknameInput.value}).then(()=>{l.commit("user/setUserNickname",t.nicknameInput.value),l.commit("notification/pushNotification","Nickname successfully updated"),_()}).catch(e=>{h(e,i)})}}function V(){const s=r();$(s.currentUser,t.emailInput.value).then(()=>{l.commit("user/setUserEmail",t.emailInput.value),l.commit("notification/pushNotification","Email Address successfully updated"),_()}).catch(e=>{h(e,i)})}function D(){const s=r();j(s.currentUser,t.passwordInput.value).then(()=>{l.commit("notification/pushNotification","Password successfully updated"),_()}).catch(e=>{h(e,i)})}function _(){t.nicknameInput.value="",t.nicknameInput.isShow=!1,t.emailInput.value="",t.emailInput.isShow=!1,t.passwordInput.value="",t.passwordInput.isShow=!1}return(s,e)=>{const o=Q("v-input-submit");return m(),G("section",K,[a("div",W,[M(R,{size:"200px"}),a("input",{class:"profile-avatar__input cursor-pointer",type:"file",accept:"image/png, image/jpeg",onInput:e[0]||(e[0]=n=>N(n.target.files[0]))},null,32)]),O(a("p",{class:"page-block__error"},p(i.value),513),[[C,i.value.length]]),a("div",X,[a("div",Y,[Z,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[1]||(e[1]=n=>f(t.nicknameInput))},[a("ins",null,p(v(d).nickname),1)])]),t.nicknameInput.isShow?(m(),w(o,{key:0,modelValue:t.nicknameInput.value,"onUpdate:modelValue":e[2]||(e[2]=n=>t.nicknameInput.value=n),submitFunc:y,class:g({shake:i.value.length}),type:"text",maxlength:"12",placeholder:"New Nickname"},null,8,["modelValue","class"])):I("",!0),a("div",ee,[te,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[3]||(e[3]=n=>f(t.emailInput))},[a("ins",null,p(v(d).email),1)])]),t.emailInput.isShow?(m(),w(o,{key:1,class:g({shake:i.value.length}),modelValue:t.emailInput.value,"onUpdate:modelValue":e[4]||(e[4]=n=>t.emailInput.value=n),type:"email",placeholder:"New Email Address",submitFunc:V},null,8,["class","modelValue"])):I("",!0),a("div",ae,[se,a("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[5]||(e[5]=n=>f(t.passwordInput))},ie)]),t.passwordInput.isShow?(m(),w(o,{key:2,class:g({shake:i.value.length}),modelValue:t.passwordInput.value,"onUpdate:modelValue":e[6]||(e[6]=n=>t.passwordInput.value=n),type:"text",maxlength:"12",placeholder:"New Password",submitFunc:D},null,8,["class","modelValue"])):I("",!0),a("div",oe,[le,a("h3",ue,p(v(b)),1)])])])}}});const he=J(ce,[["__scopeId","data-v-a12b492c"]]);export{he as default};
