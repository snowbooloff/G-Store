import{U as D,g as C,r as P,u as A,a as R}from"./index.esm2017-e27fa3ae.js";import{E as B,c as h}from"./correctFirebaseError-932f1341.js";import{g as d,M as I,P as j,Q as $}from"./index-30f3030e-585ad33e.js";import{u as F}from"./vuex.esm-bundler-5129276b.js";import{d as L,g as U,y as z,a1 as M,o as m,a as O,f as s,j as y,u as r,a6 as T,t as v,c as g,n as w,e as x,r as G,p as Q,k as q}from"./runtime-core.esm-bundler-fd07f792.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./runtime-dom.esm-bundler-6a61cd91.js";const u=c=>(Q("data-v-a19bf7ed"),c=c(),q(),c),J={class:"page-block flex flex_column flex_align-center"},K={class:"profile-avatar"},W={class:"user-info flex flex_column"},X={class:"details flex flex_align-center"},Y=u(()=>s("h3",{class:"datails__item main-white"},"Nickname:",-1)),Z={class:"details flex flex_align-center"},ee=u(()=>s("h3",{class:"datails__item main-white"},"Email Address:",-1)),te={class:"details flex flex_align-center"},se=u(()=>s("h3",{class:"datails__item main-white"},"Password:",-1)),ae=u(()=>s("ins",null,"Change Password",-1)),ne=[ae],oe={class:"details flex flex_align-center"},ie=u(()=>s("h3",{class:"datails__item main-white"},"Registration Date:",-1)),le={class:"datails__text main-blue"},re=L({__name:"UserView",setup(c){const l=F(),p=U(()=>l.state.user.userInfo),N=U(()=>new Date(p.value.registrationDate).toLocaleDateString("en-GB")),i=z(""),t=M({nicknameInput:{isShow:!1,value:""},emailInput:{isShow:!1,value:""},passwordInput:{isShow:!1,value:""}});function f(a){a.isShow=!a.isShow;const e=Object.values(t);for(let o=0;o<e.length;o++)e[o]!=a&&(e[o].isShow=!1,e[o].value="")}function S(a){if(a){const e=d(),o=C(),n=P(o,`userAvatars/${e.currentUser.uid}/avatar`);A(n,a).then(()=>{R(n).then(k=>{I(e.currentUser,{photoURL:k}),l.commit("user/setUserImage",k),l.commit("notification/pushNotification","Profile image successfully uploaded")})})}}function b(){if(t.nicknameInput.value.length<4)i.value="Nickname to be a minimum of 4 characters";else{const a=d();I(a.currentUser,{displayName:t.nicknameInput.value}).then(()=>{l.commit("user/setUserNickname",t.nicknameInput.value),l.commit("notification/pushNotification","Nickname successfully updated"),_()}).catch(e=>{h(e,i)})}}function V(){const a=d();j(a.currentUser,t.emailInput.value).then(()=>{l.commit("user/setUserEmail",t.emailInput.value),l.commit("notification/pushNotification","Email Address successfully updated"),_()}).catch(e=>{h(e,i)})}function E(){const a=d();$(a.currentUser,t.passwordInput.value).then(()=>{l.commit("notification/pushNotification","Password successfully updated"),_()}).catch(e=>{h(e,i)})}function _(){const a=Object.values(t);for(let e=0;e<a.length;e++)a[e].isShow=!1,a[e].value=""}return(a,e)=>{const o=G("v-input-submit");return m(),O("section",J,[s("div",K,[y(D,{size:"200px"}),s("input",{class:"profile-avatar__input cursor-pointer",type:"file",accept:"image/png, image/jpeg",onInput:e[0]||(e[0]=n=>S(n.target.files[0]))},null,32)]),y(B,{"error-text":r(i),"onUpdate:errorText":e[1]||(e[1]=n=>T(i)?i.value=n:null),delay:1500},null,8,["error-text"]),s("div",W,[s("div",X,[Y,s("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[2]||(e[2]=n=>f(t.nicknameInput))},[s("ins",null,v(r(p).nickname),1)])]),t.nicknameInput.isShow?(m(),g(o,{key:0,modelValue:t.nicknameInput.value,"onUpdate:modelValue":e[3]||(e[3]=n=>t.nicknameInput.value=n),submitFunc:b,class:w({shake:r(i).length}),type:"text",maxlength:"12",placeholder:"New Nickname"},null,8,["modelValue","class"])):x("",!0),s("div",Z,[ee,s("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[4]||(e[4]=n=>f(t.emailInput))},[s("ins",null,v(r(p).email),1)])]),t.emailInput.isShow?(m(),g(o,{key:1,class:w({shake:r(i).length}),modelValue:t.emailInput.value,"onUpdate:modelValue":e[5]||(e[5]=n=>t.emailInput.value=n),type:"email",placeholder:"New Email Address",submitFunc:V},null,8,["class","modelValue"])):x("",!0),s("div",te,[se,s("h3",{class:"datails__text main-blue cursor-pointer",onClick:e[6]||(e[6]=n=>f(t.passwordInput))},ne)]),t.passwordInput.isShow?(m(),g(o,{key:2,class:w({shake:r(i).length}),modelValue:t.passwordInput.value,"onUpdate:modelValue":e[7]||(e[7]=n=>t.passwordInput.value=n),type:"text",maxlength:"12",placeholder:"New Password",submitFunc:E},null,8,["class","modelValue"])):x("",!0),s("div",oe,[ie,s("h3",le,v(r(N)),1)])])])}}});const he=H(re,[["__scopeId","data-v-a19bf7ed"]]);export{he as default};
